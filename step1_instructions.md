# Dead Frontier Auto Trader - 第一步使用說明

## 📋 功能描述

這個腳本實現了開發文檔中的第一步，並加入了自動購買功能：
- 自動訪問marketplace頁面
- 搜索指定商品 (`12.7mm Rifle Bullets`)
- 分析價格並篩選出每單位價格 ≤ $11.6 的商品（前10行）
- **自動購買**所有符合條件的商品
- 在瀏覽器console中打印詳細結果和購買統計

## 🚀 安裝步驟

### 1. 安裝腳本
1. 複製 `step1_marketplace_searcher.js` 的全部內容
2. 在Tampermonkey中創建新腳本
3. 貼上代碼並保存

### 2. 訪問遊戲
1. 登錄 [Dead Frontier](https://www.deadfrontier.com/index.php?autologin=1)
2. 訪問任何Dead Frontier相關頁面（包括主頁、遊戲頁面等）

## 🎮 使用方法

### 自動模式
腳本會在任何Dead Frontier網站頁面自動執行：
1. **自動檢測** - 檢測到deadfrontier.com域名
2. **自動跳轉** - 如果不在marketplace頁面會自動跳轉
3. **自動搜索** - 切換到購買標籤頁
4. **執行搜索** - 搜索 `12.7mm Rifle Bullets`
5. **智能分析** - 分析前10行商品（由低價至高價排列）
6. **自動購買** - 購買所有單價 ≤ $11.6 的商品
7. **結果統計** - 打印詳細的搜索和購買結果

**特點：**
- ✅ 在任何Dead Frontier頁面都會自動跳轉到marketplace
- ✅ 無需手動導航，一鍵到位
- ✅ 適用於所有Dead Frontier子域名

### 手動模式
頁面右上角會出現 "🛒 搜索並購買" 按鈕，點擊即可手動觸發搜索和購買流程

## 📊 查看結果

### 1. 開啟瀏覽器開發者工具
- **Chrome**: 按 `F12` 或 `Ctrl+Shift+I`
- **Firefox**: 按 `F12` 或 `Ctrl+Shift+I`

### 2. 切換到Console標籤
在開發者工具中點擊 "Console" 標籤

### 3. 查看輸出結果
腳本會輸出類似以下格式的結果：

```
============================================================
🎯 搜索結果: 12.7mm Rifle Bullets
💰 篩選條件: 單價 ≤ $11.6 (前10行)
🛒 自動購買: 啟用
============================================================
✅ 找到 3 個符合條件的商品:

📦 商品 #1:
   💵 總價: $220
   📊 數量: 25
   💲 單價: $8.80
   ------------------------------
📦 商品 #2:
   💵 總價: $450
   📊 數量: 50
   💲 單價: $9.00
   ------------------------------
📦 商品 #3:
   💵 總價: $275
   📊 數量: 25
   💲 單價: $11.50
   ------------------------------

📈 總計統計:
   🔢 總數量: 100
   💰 總價值: $945.00
   📊 平均單價: $9.45
============================================================

🛒 開始自動購買 3 個符合條件的商品...

[1/3] 購買商品 #1
🛒 嘗試購買商品 #1: 總價=$220, 數量=25, 單價=$8.80
   🔄 已點擊購買按鈕，等待確認對話框...
   ✅ 已確認購買
   ✅ 購買成功！

[2/3] 購買商品 #2
🛒 嘗試購買商品 #2: 總價=$450, 數量=50, 單價=$9.00
   🔄 已點擊購買按鈕，等待確認對話框...
   ✅ 已確認購買
   ✅ 購買成功！

[3/3] 購買商品 #3
🛒 嘗試購買商品 #3: 總價=$275, 數量=25, 單價=$11.50
   🔄 已點擊購買按鈕，等待確認對話框...
   ✅ 已確認購買
   ✅ 購買成功！

📊 購買結果統計:
   ✅ 成功: 3
   ❌ 失敗: 0

🎉 自動購買完成！成功: 3, 失敗: 0
```

## ⚙️ 配置選項

在腳本頂部的 `CONFIG` 對象中可以修改：

```javascript
const CONFIG = {
    targetItem: '12.7mm Rifle Bullets',  // 搜索的商品名稱
    maxPricePerUnit: 11.6,               // 最大每單位價格
    maxRows: 10,                         // 只檢查前10行
    marketplaceUrl: 'https://fairview.deadfrontier.com/onlinezombiemmo/index.php?page=35',
    autoBuy: true                        // 啟用自動購買
};
```

### ⚠️ 安全設置

如果您不想自動購買，可以將 `autoBuy` 設為 `false`：
```javascript
autoBuy: false  // 只搜索和分析，不自動購買
```

## 🔧 故障排除

### 腳本沒有運行
1. 確認Tampermonkey已啟用
2. 檢查腳本是否已啟用
3. 確認URL匹配規則正確

### 沒有搜索結果
1. 確認已登錄遊戲
2. 確認在正確的伺服器
3. 手動訪問marketplace確認可以正常使用

### Console沒有輸出
1. 確認開發者工具已開啟
2. 檢查Console標籤是否選中
3. 刷新頁面重新觸發腳本

## 📝 日誌說明

腳本會輸出詳細的執行日誌：
- `DF Auto Trader Step 1: Starting...` - 腳本啟動
- `🚀 執行第一步：marketplace搜索` - 開始執行主流程
- `開始搜索商品: 12.7mm Rifle Bullets` - 開始搜索
- `找到 X 個商品` - 搜索結果統計
- `✅ 第一步執行完成！` - 執行成功

## 🎯 下一步

這是整個自動交易系統的第一步，主要用於：
1. 驗證網頁元素識別是否正確
2. 測試搜索功能是否正常
3. 確認價格分析邏輯是否準確

完成測試後，可以繼續開發後續功能：
- 自動購買功能
- 庫存管理
- 自動銷售
- 銀行操作

## ⚠️ 注意事項

1. **🧪 測試環境**: 建議先在小號或測試環境中運行
2. **💰 財務風險**: 腳本會自動購買商品，請確保您有足夠的資金和庫存空間
3. **⏱️ 網路延遲**: 腳本包含適當的延遲以避免過快操作
4. **🔧 頁面變化**: 如果網頁結構改變，可能需要更新選擇器
5. **⚡ 緊急停止**: 如需緊急停止，請立即關閉瀏覽器標籤頁
6. **📋 庫存管理**: 購買前請確保庫存有足夠空間
7. **🛡️ 責任自負**: 使用自動化腳本存在風險，請謹慎使用

### 🚨 首次使用建議

1. 先將 `autoBuy` 設為 `false` 測試搜索功能
2. 確認搜索結果正確後再啟用自動購買
3. 調整 `maxPricePerUnit` 為適合的價格範圍
4. 小額測試，確認購買流程正常 